import { SwapOrder } from '../../../../src/swaps/domain/SwapOrder';
import { BridgingOrder } from '../../../../src/bridges/domain/bridging-order';
import { RouterCallEncoder } from '../../../../src/shared/domain/router-call-encoder';
import { BigInteger } from '../../../../src/shared/domain/BigInteger';

describe('router-call-encoder', () => {
  it('should encode a default `initSwidge` callData correctly', () => {
    // Arrange
    const encoder = new RouterCallEncoder();
    const originSwap = SwapOrder.notRequired();
    const bridgeOrder = BridgingOrder.notRequired();
    const destinationSwap = SwapOrder.notRequired();
    const amountIn = BigInteger.fromDecimal('10');

    // Act
    const callData = encoder.encodeInitSwidge(amountIn, originSwap, bridgeOrder, destinationSwap);

    // Assert
    expect(callData).toEqual(
      '0x5c551f450000000000000000000000000000000000000000000000008ac7230489e8000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
    );
  });

  it('should encode a default `finalizeSwidge` callData correctly', () => {
    // Arrange
    const encoder = new RouterCallEncoder();
    const amountIn = BigInteger.fromDecimal('10');
    const receiver = '0xF0245F6251Bef9447A08766b9DA2B07b28aD80B0';
    const originTxHash = '0xb37283233dc7308397ca5b6b822d1dcf3c5c7f0e77d073c4251e63a13c6d3af1';
    const destinationSwap = SwapOrder.notRequired();

    // Act
    const callData = encoder.encodeFinalizeSwidge(
      amountIn,
      receiver,
      originTxHash,
      destinationSwap,
    );

    // Assert
    expect(callData).toEqual(
      '0xc72f449b0000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000f0245f6251bef9447a08766b9da2b07b28ad80b0b37283233dc7308397ca5b6b822d1dcf3c5c7f0e77d073c4251e63a13c6d3af1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
    );
  });
});
